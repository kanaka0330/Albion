<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ€ ã‚ã‚‹ã³ãŠã‚“ãƒ“ãƒ³ã‚´ ğŸ€</title>
  <style>
    body {
      font-family:'Hiragino Kaku Gothic ProN',sans-serif;
      background: linear-gradient(135deg, #fff0f6, #e0f7fa);
      text-align: center;
      padding: 40px;
      color: #444;
    }
    h1 { font-size: 32px; color: #e67cb8; }
    #bingo-card {
      display: grid;
      grid-template-columns: repeat(5, 60px);
      gap: 10px;
      justify-content: center;
      margin-top: 30px;
    }
    .cell {
      width: 60px;
      height: 60px;
      line-height: 60px;
      background: #fff;
      border: 2px solid #f8a4c3;
      border-radius: 10px;
      font-size: 20px;
    }
    .marked {
      background: #fbd0e2;
      font-weight: bold;
      color: #e60073;
    }
    button {
      margin-top: 20px;
      font-size: 16px;
      padding: 10px 20px;
      background: #f8a4c3;
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
    }
    button:hover { background: #e67cb8; }
    input {
      padding: 8px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-right: 8px;
    }
    #drawn-numbers, #name-area, #participants {
      margin-top: 30px;
      font-size: 16px;
    }
    #participants ul {
      list-style: none;
      padding: 0;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>ğŸ€ã€€ã‚ã‚‹ã³ãŠã‚“ãƒ“ãƒ³ã‚´ã€€ğŸ€</h1>
  <div id="name-area">
    <input id="player-name" placeholder="ãŠåå‰å…¥åŠ›ã—ã¦ãã ã•ã„"/>
    <button onclick="registerPlayer()">å‚åŠ ã™ã‚‹</button>
  </div>
  <div id="bingo-card"></div>
  <button onclick="drawNumber()">ç•ªå·ã‚’ã²ã ğŸ²</button>
  <div id="drawn-numbers"></div>
  <div id="participants"><h3>ğŸŒ¸ å‚åŠ è€…ä¸€è¦§</h3><ul id="participant-list"></ul></div>

<script>
const size = 5, cardNumbers = [], drawnNumbers = [], participants = [];
const card = document.getElementById("bingo-card"),
      drawnDiv = document.getElementById("drawn-numbers"),
      nameInput = document.getElementById("player-name"),
      participantList = document.getElementById("participant-list");

function generateCard(){
  const used = new Set();
  for (let i = 0; i < size * size; i++) {
    let num;
    do { num = Math.floor(Math.random() * 75) + 1; } while (used.has(num));
    used.add(num);
    cardNumbers[i] = num;
  }
  cardNumbers[Math.floor(size * size / 2)] = "FREE";
}

function displayCard(){
  card.innerHTML = "";
  cardNumbers.forEach(n => {
    const cell = document.createElement("div");
    cell.className = "cell";
    cell.textContent = n;
    if (n === "FREE") cell.classList.add("marked");
    card.appendChild(cell);
  });
}

function registerPlayer(){
  const name = nameInput.value.trim();
  if (!name) return alert("åå‰å…¥åŠ›ã—ã¦ãã ã•ã„ï¼");
  if (participants.some(p => p.name === name)) return alert("æ—¢ã«ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™ï¼");
  participants.push({ name, status: "å‚åŠ ä¸­", bingoNumber: null });
  updateParticipants();
  nameInput.value = "";

  generateCard();  // ã‚«ãƒ¼ãƒ‰ç”Ÿæˆ
  displayCard();   // ã‚«ãƒ¼ãƒ‰è¡¨ç¤º
}

function updateParticipants(){
  participantList.innerHTML = "";
  participants.forEach(p => {
    const li = document.createElement("li");
    li.textContent = `${p.name}ï¼ˆ${p.status}ï¼‰`;
    participantList.appendChild(li);
  });
}

function drawNumber(){
  if (drawnNumbers.length >= 75) return;
  let num;
  do { num = Math.floor(Math.random() * 75) + 1; } while (drawnNumbers.includes(num));
  drawnNumbers.push(num);
  highlightNumber(num);
  updateDrawnNumbers();
}

function highlightNumber(n){
  document.querySelectorAll(".cell").forEach(c => {
    if (parseInt(c.textContent) === n) c.classList.add("marked");
  });
}

function updateDrawnNumbers(){
  drawnDiv.innerHTML = `<strong>å‡ºãŸç•ªå·ï¼š</strong> ${drawnNumbers.join("ãƒ»")}`;
}

</script>
</body>
</html>
